!function(t,r){"function"==typeof define&&define.amd?define("p5.func",["p5"],function(t){r(t)}):"object"==typeof exports?r(require("../p5")):r(t.p5)}(this,function(p5){p5.Gen=function(){this.version=.01},p5.Gen.prototype.harmonics=function(t,r){var e,a=!0;for(var s in Array.isArray(t)||t.constructor===Float32Array||t.constructor===Float64Array||(t=[t],a=!1),Array.isArray(r)||(r=[r]),Array.isArray(t)?e=new Array(t.length):t.constructor===Float32Array?e=new Float32Array(t.length):t.constructor===Float64Array&&(e=new Float64Array(t.length)),t){var i=r.length;for(e[s]=0;i--;)if(0!=r[i]){var n=TWO_PI*t[s]*(i+1);e[s]+=Math.sin(n)*r[i]}}return a?e:e[0]},p5.Gen.prototype.triples=function(t,r){var e,a=!0;if(Array.isArray(t)||t.constructor===Float32Array||t.constructor===Float64Array||(t=[t],a=!1),r.length<2)return console.log("p5.Gen : we need at least 3 arguments!"),0;for(i in r.length%3!=0&&console.log("p5.Gen : incomplete <partial, amp, phase> triplet!"),Array.isArray(t)?e=new Array(t.length):t.constructor===Float32Array?e=new Float32Array(t.length):t.constructor===Float64Array&&(e=new Float64Array(t.length)),t){e[i]=0;for(var s=r.length-1;s>0;s-=3){var n;if(0!=r[s-1])n=0==r[s-2]?1:Math.sin(TWO_PI*(t[i]/(1/r[s-2])+r[s]/360)),e[i]+=n*r[s-1]}}return a?e:e[0]},p5.Gen.prototype.chebyshev=function(t,r){var e,a=!0;for(var s in Array.isArray(t)||t.constructor===Float32Array||t.constructor===Float64Array||(t=[t],a=!1),Array.isArray(r)||(r=[r]),Array.isArray(t)?e=new Array(t.length):t.constructor===Float32Array?e=new Float32Array(t.length):t.constructor===Float64Array&&(e=new Float64Array(t.length)),t){var i=2*t[s]-1;e[s]=0;for(var n=1,o=i,h=0;h<r.length;h++)e[s]+=r[h]*o,Tn2=n,o=2*i*(n=o)-Tn2}return a?e:e[0]},p5.Gen.prototype.bpf=function(t,r){var e=!0;if(Array.isArray(t)||t.constructor===Float32Array||t.constructor===Float64Array||(t=[t],e=!1),r.length%2!=0)return console.log("p5.Gen : incomplete <time, value> pair!"),0;var a=r[r.length-2],s=r[0];if(a-s<=0)return console.log("p5.Gen : bpf times must be in ascending order!"),0;var n,o=1/(a-s),h=0,p=0,l=0,c=0;for(i in Array.isArray(t)?n=new Array(t.length):t.constructor===Float32Array?n=new Float32Array(t.length):t.constructor===Float64Array&&(n=new Float64Array(t.length)),t)for(var u=1;u<r.length;u+=2){if(h=r[u-1]*o,l=r[u],u<r.length-1?(p=r[u+1]*o,c=r[u+2]):(p=h,c=l),p-h<0)return console.log("p5.Gen : bpf times music be in ascending order!"),0;if(t[i]>=h&&t[i]<=p){r[u+1];n[i]=map(t[i],h,p,l,c);break}}return e?n:n[0]},p5.Gen.prototype.random=function(t,r){var e,a=!0;for(var s in t?"string"!=typeof t?Array.isArray(arguments[0])||arguments[0].constructor===Float32Array||arguments[0].constructor===Float64Array||(t=[t],a=!1):(r=t,t=[millis()],a=!1):(r="linear",t=[millis()],a=!1),Array.isArray(t)?e=new Array(t.length):t.constructor===Float32Array?e=new Float32Array(t.length):t.constructor===Float64Array&&(e=new Float64Array(t.length)),-1===t[0]&&randomSeed(1e5*millis()),t)switch(-1!=t[s]&&randomSeed(1e5*t[s]),r){case"linear":case"even":e[s]=random();break;case"low":e[s]=Math.min(random(),random());break;case"high":e[s]=Math.max(random(),random());break;case"triangle":e[s]=(random()+random())/2;break;case"gaussian":for(var i=0,n=0;n<12;n++)i+=random();e[s]=.166666*(i-6)+.5;break;case"cauchy":do{do{e[s]=random()}while(.5==e[s]);e[s]=.00628338*tan(e[s]*PI)+.5}while(e[s]<0||e[s]>1);break;default:e[s]=random()}return a?e:e[0]},p5.Gen.prototype.window=function(t,r,e){var a,s=!0;switch(Array.isArray(e)||(e=[e]),Array.isArray(t)||t.constructor===Float32Array||t.constructor===Float64Array||(t=[t],s=!1),Array.isArray(t)?a=new Array(t.length):t.constructor===Float32Array?a=new Float32Array(t.length):t.constructor===Float64Array&&(a=new Float64Array(t.length)),r){case 1:case"hamming":var i=.54;for(b in t)a[b]=i-.46*Math.cos(TWO_PI*t[b]);break;case 2:case"hanning":case"vonhann":case"hann":case"hannsolo":case"hanningvonhannmeister":for(b in t)a[b]=.5*(1-Math.cos(TWO_PI*t[b]));break;case 3:case"bartlett":case"fejer":case"fej√©r":case"triangle":for(b in t)a[b]=1-Math.abs((t[b]-.5)/.5);break;case"bartlett-hann":var n=.62,o=.48,h=.38;for(b in t)a[b]=n-o*Math.abs(t[b]-.5)-h*Math.cos(2*PI*t[b]);break;case 4:case"blackman":n=7938/18608,o=9240/18608,h=1430/18608;for(b in t)a[b]=n-o*Math.cos(2*PI*t[b])+h*Math.cos(4*PI*t[b]);break;case"generalizedblackman":e[0]||(e[0]=.5);n=(1-(A=e[0]))/2,o=.5,h=A/2;for(b in t){var p=PI*t[b];a[b]=n-o*Math.cos(2*p)+h*Math.cos(4*p)}break;case 5:case"blackman-harris":n=.35875,o=.48829,h=.14128;var l=.01168;for(b in t)a[b]=n-o*Math.cos(2*PI*t[b])+h*Math.cos(4*PI*t[b])+l*Math.cos(6*PI*t[b]);break;case"blackman-nuttal":n=.3635819,o=.4891775,h=.1365995,l=.0106411;for(b in t)a[b]=n-o*Math.cos(2*PI*t[b])+h*Math.cos(4*PI*t[b])+l*Math.cos(6*PI*t[b]);break;case"nuttal":n=.355768,o=.487396,h=.144232,l=.012604;for(b in t)a[b]=n-o*Math.cos(2*PI*t[b])+h*Math.cos(4*PI*t[b])+l*Math.cos(6*PI*t[b]);break;case 6:case"gaussian":e[0]||(e[0]=.4);var c=e[0];for(b in t)a[b]=Math.exp((t[b]-.5)/(.5*c)*-.5*((t[b]-.5)/(.5*c)));break;case 7:case"kaiser":i=3;for(b in t){var u=PI*i*Math.sqrt(1-(2*t[b]-1)*(2*t[b]-1)),f=PI*i;a[b]=besselI0(u)/besselI0(f)}break;case 8:case"rectangle":case"boxcar":case"dirichlet":for(b in t)a[b]=1;break;case"cosine":for(b in t)a[b]=Math.sin(PI*t[b]);break;case 9:case"sinc":case"sync":case"lanczos":for(b in t)a[b]=sinc(2*t[b]-1);break;case"flattop":n=1,o=1.93,h=1.29,l=.388;for(b in t)a[b]=n-o*Math.cos(2*PI*t[b])+h*Math.cos(4*PI*t[b])-l*Math.cos(6*PI*t[b])+.032*Math.cos(8*PI*t[b]),a[b]/=n+o+h+l+.032;break;case"tukey":e[0]||(e[0]=.5);var y=1-(m=(A=e[0])/2);for(b in t)a[b]=1,t[b]<=m?a[b]=.5*(1+Math.cos(PI*(2*t[b]/A-1))):t[b]>y&&(a[b]=.5*(1+Math.cos(PI*(2*t[b]/A-2/A+1))));break;case"slidinggaussian":e[0]||(e[0]=.5),e[1]||(e[1]=.4);var v=2*(e[0]-.5);c=2*e[1];for(var b in t)a[b]=Math.exp(0-sq(2*t[b]-1-v)/(2*c*c));break;case"adjustablecosine":e[0]||(e[0]=.5);var m;y=1-(m=(A=e[0])/2);for(b in t)a[b]=1,t[b]<=A?a[b]=.5*(1+Math.cos(PI*(t[b]/A-1))):a[b]=.5*(1+Math.cos(PI*((t[b]-A)/(1-A))));break;case"elliptic":e[0]||(e[0]=.5);var A=e[0],M=0+Number.EPSILON,g=1-Number.EPSILON;for(b in A=constrain(A,M,g),t)a[b]=0,t[b]<=A?a[b]=1/A*Math.sqrt(sq(A)-sq(t[b]-A)):a[b]=1/(1-A)*Math.sqrt(sq(1-A)-sq(t[b]-A));break;case"hyperelliptic":e[0]||(e[0]=.5),e[1]||(e[1]=3);A=e[0];var _=e[1];M=0+Number.EPSILON,g=1-Number.EPSILON;for(b in A=constrain(A,M,g),t){a[b]=0;var w=2*_;t[b]<=A?a[b]=1/A*Math.pow(Math.pow(A,w)-Math.pow(t[b]-A,w),1/w):a[b]=1/(1-A)*Math.pow(Math.pow(1-A,w)-Math.pow(t[b]-A,w),1/w)}break;case"squircular":e[0]||(e[0]=.5),e[1]||(e[1]=3);A=e[0],_=e[1],M=0+Number.EPSILON,g=1-Number.EPSILON;for(b in A=constrain(A,M,g),t){a[b]=0;w=Math.max(2,2*_);t[b]<=A?a[b]=1-A+Math.pow(Math.pow(A,w)-Math.pow(t[b]-A,w),1/w):a[b]=A+Math.pow(Math.pow(1-A,w)-Math.pow(t[b]-A,w),1/w)}break;case"poisson":e[0]||(e[0]=.5);var d=Math.max(e[0],Number.EPSILON);for(var b in t)a[b]=Math.exp(0-Math.abs(t[b]-.5)*(1/d));break;case"hann-poisson":case"poisson-hann":case"hannpoisson":case"poissonhann":e[0]||(e[0]=.5);d=25*Math.max(e[0]*e[0]*e[0]*e[0],Number.EPSILON);for(b in t){var E=.5*(1-Math.cos(TWO_PI*t[b])),I=Math.exp(0-Math.abs(t[b]-.5)*(1/d));a[b]=E*I}break;case"slidinghann-poisson":case"slidingpoisson-hann":case"slidinghannpoisson":case"slidingpoissonhann":e[0]||(e[0]=.5),e[1]||(e[1]=.5);d=25*Math.max(e[1]*e[1]*e[1]*e[1],Number.EPSILON);for(b in t){var N=constrain(t[b]+(.5-e[0]),0,1);E=.5*(1-Math.cos(TWO_PI*N)),I=Math.exp(0-Math.abs(N-.5)*(1/d));a[b]=E*I}}return s?a:a[0]},p5.Gen.prototype.waveform=function(t,r){var e,a=!0;switch(Array.isArray(t)||t.constructor===Float32Array||t.constructor===Float64Array||(t=[t],a=!1),Array.isArray(t)?e=new Array(t.length):t.constructor===Float32Array?e=new Float32Array(t.length):t.constructor===Float64Array&&(e=new Float64Array(t.length)),r){case"sine":case"sin":e=this.harmonics(t,[1]);break;case"cosine":case"cos":e=this.triples(t,[1,1,90]);break;case"saw":case"sawtooth":case"sawup":e=this.bpf(t,[0,-1,1,1]);break;case"sawdown":e=this.bpf(t,[0,1,1,-1]);break;case"phasor":e=this.bpf(t,[0,0,1,1]);break;case"square":e=this.bpf(t,[0,1,1,1,1,-1,2,-1]);break;case"rect":case"rectangle":e=this.bpf(t,[0,1,1,1,1,-1,10,-1]);break;case"pulse":e=this.bpf(t,[0,1,1,1,1,-1,100,-1]);break;case"tri":case"triangle":e=this.bpf(t,[0,0,1,1,2,0,3,-1,4,0]);break;case"buzz":e=this.harmonics(t,[.1,.1,.1,.1,.1,.1,.1,.1,.1,.1])}return a?e:e[0]},p5.Gen.prototype.listAlgos=function(){var t=new Array;for(var r in this.__proto__){var e=!0;"listAlgos"==r?e=!1:"fillArray"==r?e=!1:"fillFloat32Array"==r?e=!1:"fillFloat64Array"==r&&(e=!1),e&&t.push(r)}return t},p5.Gen.prototype.fillArray=function(t,r,e,a){var s=new Array(r);new Array(r);if("random"===t)for(var i=0;i<r;i++)s[i]=a?i/(r-1)*1e4+a:"-1";else for(i=0;i<r;i++)s[i]=i/(r-1);return this[t](s,e,a)},p5.Gen.prototype.fillFloat32Array=function(t,r,e,a){var s=new Float32Array(r);new Float32Array(r);if("random"===t)for(var i=0;i<r;i++)s[i]=a?i/(r-1)*1e4+a:"-1";else for(i=0;i<r;i++)s[i]=i/(r-1);return this[t](s,e,a)},p5.Gen.prototype.fillFloat64Array=function(t,r,e,a){var s=new Float64Array(r);new Float64Array(r);if("random"===t)for(var i=0;i<r;i++)s[i]=a?i/(r-1)*1e4+a:"-1";else for(i=0;i<r;i++)s[i]=i/(r-1);return this[t](s,e,a)},p5.Ease=function(){this.version=.01},p5.Ease.prototype.linear=function(t){return t},p5.Ease.prototype.quadraticIn=function(t){return t*t},p5.Ease.prototype.quadraticOut=function(t){return-t*(t-2)},p5.Ease.prototype.quadraticInOut=function(t){return t<.5?2*t*t:-2*t*t+4*t-1},p5.Ease.prototype.cubicIn=function(t){return t*t*t},p5.Ease.prototype.cubicOut=function(t){var r=t-1;return r*r*r+1},p5.Ease.prototype.cubicInOut=function(t){if(t<.5)return 4*t*t*t;var r=2*t-2;return.5*r*r*r+1},p5.Ease.prototype.quarticIn=function(t){return t*t*t*t},p5.Ease.prototype.quarticOut=function(t){var r=t-1;return r*r*r*(1-t)+1},p5.Ease.prototype.quarticInOut=function(t){if(t<.5)return 8*t*t*t*t;var r=t-1;return-8*r*r*r*r+1},p5.Ease.prototype.quinticIn=function(t){return t*t*t*t*t},p5.Ease.prototype.quinticOut=function(t){var r=t-1;return r*r*r*r*r+1},p5.Ease.prototype.quinticInOut=function(t){if(t<.5)return 16*t*t*t*t*t;var r=2*t-2;return.5*r*r*r*r*r+1},p5.Ease.prototype.sineIn=function(t){return Math.sin((t-1)*HALF_PI)+1},p5.Ease.prototype.sineOut=function(t){return Math.sin(t*HALF_PI)},p5.Ease.prototype.sineInOut=function(t){return.5*(1-Math.cos(t*PI))},p5.Ease.prototype.circularIn=function(t){return 1-Math.sqrt(1-t*t)},p5.Ease.prototype.circularOut=function(t){return Math.sqrt((2-t)*t)},p5.Ease.prototype.circularInOut=function(t){return t<.5?.5*(1-Math.sqrt(1-t*t*4)):.5*(Math.sqrt(-(2*t-3)*(2*t-1))+1)},p5.Ease.prototype.exponentialIn=function(t){return 0==t?t:Math.pow(2,10*(t-1))},p5.Ease.prototype.exponentialOut=function(t){return 1==t?t:1-Math.pow(2,-10*t)},p5.Ease.prototype.exponentialInOut=function(t){return 0==t||1==t?t:t<.5?.5*Math.pow(2,20*t-10):-.5*Math.pow(2,-20*t+10)+1},p5.Ease.prototype.elasticIn=function(t){return Math.sin(13*HALF_PI*t)*Math.pow(2,10*(t-1))},p5.Ease.prototype.elasticOut=function(t){return Math.sin(-13*HALF_PI*(t+1))*Math.pow(2,-10*t)+1},p5.Ease.prototype.elasticInOut=function(t){return t<.5?.5*Math.sin(13*HALF_PI*(2*t))*Math.pow(2,10*(2*t-1)):.5*(Math.sin(-13*HALF_PI*(2*t-1+1))*Math.pow(2,-10*(2*t-1))+2)},p5.Ease.prototype.backIn=function(t){return t*t*t-t*Math.sin(t*PI)},p5.Ease.prototype.backOut=function(t){var r=1-t;return 1-(r*r*r-r*Math.sin(r*PI))},p5.Ease.prototype.backInOut=function(t){var r;return t<.5?.5*((r=2*t)*r*r-r*Math.sin(r*PI)):.5*(1-((r=1-(2*t-1))*r*r-r*Math.sin(r*PI)))+.5},p5.Ease.prototype.bounceIn=function(t){return 1-this.bounceOut(1-t)},p5.Ease.prototype.bounceOut=function(t){return t<4/11?121*t*t/16:t<8/11?9.075*t*t-9.9*t+3.4:t<.9?4356/361*t*t-35442/1805*t+16061/1805:10.8*t*t-20.52*t+10.72},p5.Ease.prototype.bounceInOut=function(t){return t<.5?.5*this.bounceIn(2*t):.5*this.bounceOut(2*t-1)+.5},p5.Ease.prototype.brycesCubic=function(t,r){r||(r=3);var e=Math.pow(t,r-1);return r*e-(r-1)*(e*t)},p5.Ease.prototype.staircase=function(t,r){r||(r=3);var e=Math.floor(t*r)/(r-1);return t>=1&&(e=1),e},p5.Ease.prototype.exponentialSmoothedStaircase=function(t,r,e){r||(r=.25),e||(e=3);for(var a=sq(map(r,0,1,5,30)),s=0,i=0;i<e;i++)s+=1/(e-1)/(1+Math.exp(a*((i+1)/e-t)));return s=constrain(s,0,1)},p5.Ease.prototype.gompertz=function(t,r){r||(r=.25);var e=0+Number.EPSILON,a=0-16*(r=Math.max(r,e)),s=Math.exp(-8*Math.exp(a*t)),i=Math.exp(-8*Math.exp(a)),n=Math.exp(-8);return s=map(s,n,i,0,1)},p5.Ease.prototype.generalizedLinearMap=function(t,r,e,a,s){r||(r=0),e||(e=0),a||(a=1),s||(s=1);return r<a?t<=r?e:t>=a?s:map(t,r,a,e,s):t<=a?s:t>=r?e:map(t,a,r,s,e)},p5.Ease.prototype.doubleOddPolynomialOgee=function(t,r,e,a){r||(r=.25),e||(e=.75),a||(a=3);var s=0+Number.EPSILON,i=1-Number.EPSILON;r=constrain(r,s,i),e=constrain(e,0,1);var n=2*a+1;return t<=r?e-e*Math.pow(1-t/r,n):e+(1-e)*Math.pow((t-r)/(1-r),n)},p5.Ease.prototype.doubleLinear=function(t,r,e){r||(r=.25),e||(e=.75);var a=0+Number.EPSILON,s=1-Number.EPSILON;return r=constrain(r,a,s),e=constrain(e,0,1),t<=r?e/r*t:e+(1-e)/(1-r)*(t-r)},p5.Ease.prototype.tripleLinear=function(t,r,e,a,s){r||(r=.25),e||(e=.75),a||(a=.75),s||(s=.25);return r<a?t<=r?map(t,0,r,0,e):t>=a?map(t,a,1,s,1):map(t,r,a,e,s):t<=a?map(t,0,a,0,s):t>=r?map(t,r,1,e,1):map(t,a,r,s,e)},p5.Ease.prototype.variableStaircase=function(t,r,e){r||(r=.25),e||(e=3);var a=r-.5;if(0==a)return t;var s=Math.floor(t*e)/e,i=Math.ceil(t*e)/e,n=i,o=.5*(s+i)+a/e,h=.5*(s+i)-a/e;return t<o&&t>s?map(t,s,o,s,h):map(t,o,i,h,n)},p5.Ease.prototype.quadraticBezierStaircase=function(t,r,e){r||(r=.25),e||(e=3);var a=r-.5;if(0==a)return t;var s=Math.floor(t*e)/e,i=Math.ceil(t*e)/e,n=s,o=i,h=.5*(s+i)+a/e,p=.5*(s+i)-a/e,l=(s+h)/2,c=(n+p)/2,u=(i+h)/2,f=(o+p)/2,y=0,v=1/e*.5;if(t<=l&&t>=s)if(Math.floor(t*e)<=0)y=map(t,s,h,n,p);else{Math.abs(t-s),Number.EPSILON;var b=(n-(f-1/e))/v,m=(t-(u-1/e))/v,A=1-2*(_=(s-(u-1/e))/v),M=Math.max(0,_*_+A*m),g=(w=(Math.sqrt(M)-_)/A)*w*(1-2*b)+2*b*w;g*=f-c,g+=f,t>s&&(g-=1/e),y=g}else if(t>=u&&t<=i)if(Math.ceil(t*e)>=e)y=map(t,h,i,p,o);else{Math.abs(t-i),Number.EPSILON;b=(o-f)/v,m=(t-u)/v;.5==(_=(i-u)/v)&&(_+=Number.EPSILON);A=1-2*_;Math.abs(A)<Number.EPSILON&&(A=(A<0?-1:1)*Number.EPSILON);M=Math.max(0,_*_+A*m),g=(w=(Math.sqrt(M)-_)/A)*w*(1-2*b)+2*b*w;g*=f-c,y=g+=f}else{var _;b=(p-c)/v,m=(t-l)/v;.5==(_=(h-l)/v)&&(_+=Number.EPSILON);var w;A=1-2*_,g=(w=(Math.sqrt(_*_+A*m)-_)/A)*w*(1-2*b)+2*b*w;g*=f-c,y=g+=c}return y},p5.Ease.prototype.doubleExponentialSigmoid=function(t,r){r||(r=.75);var e=0+Number.EPSILON,a=1-Number.EPSILON;r=1-(r=constrain(r,e,a));return t<=.5?Math.pow(2*t,1/r)/2:1-Math.pow(2*(1-t),1/r)/2},p5.Ease.prototype.adjustableCenterDoubleExponentialSigmoid=function(t,r,e){r||(r=.75),e||(e=.5);var a=0+Number.EPSILON,s=1-Number.EPSILON;r=1-(r=constrain(r,a,s));var i=Math.max(0,Math.min(1,t-(e-.5)));return i<=.5?Math.pow(2*i,1/r)/2:1-Math.pow(2*(1-i),1/r)/2},p5.Ease.prototype.doubleQuadraticSigmoid=function(t){return t<=.5?sq(2*t)/2:1-sq(2*(t-1))/2},p5.Ease.prototype.doublePolynomialSigmoid=function(t,r){r||(r=3);return r%2==0?t<=.5?Math.pow(2*t,r)/2:1-Math.pow(2*(t-1),r)/2:t<=.5?Math.pow(2*t,r)/2:1+Math.pow(2*(t-1),r)/2},p5.Ease.prototype.doubleEllipticOgee=function(t,r,e){r||(r=.25),e||(e=.75);var a=0+Number.EPSILON,s=1-Number.EPSILON;return t<=(r=constrain(r,a,s))?e/r*Math.sqrt(sq(r)-sq(t-r)):1-(1-e)/(1-r)*Math.sqrt(sq(1-r)-sq(t-r))},p5.Ease.prototype.doubleCubicOgee=function(t,r,e){r||(r=.25),e||(e=.75);var a=0+Number.EPSILON,s=1-Number.EPSILON;r=constrain(r,a,s),e=constrain(e,0,1);return t<=r?e-e*Math.pow(1-t/r,3):e+(1-e)*Math.pow((t-r)/(1-r),3)},p5.Ease.prototype.doubleCircularSigmoid=function(t,r){r||(r=.25);return t<=r?r-Math.sqrt(r*r-t*t):r+Math.sqrt(sq(1-r)-sq(t-1))},p5.Ease.prototype.doubleSquircularSigmoid=function(t,r,e){r||(r=.25),e||(e=3);var a=Math.max(2,2*e);return t<=r?r-Math.pow(Math.pow(r,a)-Math.pow(t,a),1/a):r+Math.pow(Math.pow(1-r,a)-Math.pow(t-1,a),1/a)},p5.Ease.prototype.doubleQuadraticBezier=function(t,r,e,a,s){r||(r=.25),e||(e=.75),a||(a=.75),s||(s=.25);var i=(r+a)/2,n=(e+s)/2;i=constrain(i,Number.EPSILON,1-Number.EPSILON),n=constrain(n,Number.EPSILON,1-Number.EPSILON);var o,h,p,l,c,u=0;return t<=i?(p=t/i,c=e/n,0==(o=1-2*(l=r/i))&&(o=Number.EPSILON),u=(h=(Math.sqrt(l*l+o*p)-l)/o)*h*(1-2*c)+2*c*h,u*=n):(p=(t-i)/(1-i),c=(s-n)/(1-n),0==(o=1-2*(l=(a-i)/(1-i)))&&(o=Number.EPSILON),u=(h=(Math.sqrt(l*l+o*p)-l)/o)*h*(1-2*c)+2*c*h,u*=1-n,u+=n),u},p5.Ease.prototype.doubleEllipticSigmoid=function(t,r,e){r||(r=.25),e||(e=.75);return t<=r?r<=0?0:e*(1-Math.sqrt(sq(r)-sq(t))/r):r>=1?1:e+(1-e)/(1-r)*Math.sqrt(sq(1-r)-sq(t-1))},p5.Ease.prototype.doubleCubicOgeeSimplified=function(t,r,e){r||(r=.25),e||(e=.75),e=1-e;var a,s=0;t<=r?s=r<=0?0:e*t+(1-e)*r*(1-(a=1-t/r)*a*a):s=r>=1?1:e*t+(1-e)*(r+(1-r)*(a=(t-r)/(1-r))*a*a);return s},p5.Ease.prototype.raisedInvertedCosine=function(t){return(1-Math.cos(PI*t))/2},p5.Ease.prototype.cosineApproximation=function(t){var r=t*t,e=r*r;return 4/9*(e*r)-17/9*e+22/9*r},p5.Ease.prototype.smoothStep=function(t){return t*t*(3-2*t)},p5.Ease.prototype.smootherStep=function(t){return t*t*t*(t*(6*t-15)+10)},p5.Ease.prototype.cheapStep=function(t){return t=1-(t=1-t*t)*t},p5.Ease.prototype.maclaurinCosine=function(t){for(var r=1,e=(t*=PI)*t,a=1,s=1,i=r,n=0;n<6;n++)s*=2*n+1,i+=(a=0-a)*((r*=e)/(s*=2*n+2));return i=(1-i)/2},p5.Ease.prototype.catmullRomInterpolate=function(t,r,e){r||(r=.25),e||(e=.75);var a=t*t;return constrain((-.5*r+.5*e-1.5)*t*a+(r-.5*e+2)*a+(-.5*r+.5)*t,0,1)},p5.Ease.prototype.hermite=function(t,r,e,a,s){r||(r=.25),e||(e=0),a||(a=1),s||(s=.25),r=map(r,0,1,-1,1);var i=.5*((a=map(a,0,1,-1,1))-r),n=e-a,o=i+n,h=o+n+.5*(s-e);return((h*t-(o+h))*t+i)*t+e},p5.Ease.prototype.hermite2=function(t,r,e,a,s){r||(r=.25),e||(e=.75),a||(a=.75),s||(s=.25);var i,n,o=map(a,0,1,-1,1),h=map(s,0,1,-1,1),p=t*t,l=p*t;return i=(0-2*(r-.5))*(1+h)*(1-o)/2,n=1*(1+h)*(1-o)/2,0*(2*l-3*p+1)+(l-2*p+t)*(i+=1*(1-h)*(1-o)/2)+(l-p)*(n+=(e-1)*(1-h)*(1-o)/2)+1*(-2*l+3*p)},p5.Ease.prototype.normalizedErf=function(t){var r=map(t,0,1,-2,2),e=r*r,a=8*(PI-3)/(3*PI*(4-PI)),s=Math.sqrt(1-Math.exp(0-e*((a*e+4/PI)/(a*e+1))));return r<0&&(s=0-s),s=((s/=.99532226501)+1)/2},p5.Ease.prototype.normalizedInverseErf=function(t){var r=map(t,0,1,-.99532226501,.99532226501),e=r*r,a=8*(PI-3)/(3*PI*(4-PI)),s=2/(PI*a)+Math.log(1-e)/2,i=Math.log(1-e)/a,n=Math.sqrt(Math.sqrt(s*s-i)-s);return r<0&&(n=0-n),n/=2,n+=1,n/=2,n=constrain(n,0,1)},p5.Ease.prototype.exponentialEmphasis=function(t,r){r||(r=.25);var e=0+Number.EPSILON,a=1-Number.EPSILON;return(r=constrain(r,e,a))<.5?(r*=2,Math.pow(t,r)):(r=2*(r-.5),Math.pow(t,1/(1-r)))},p5.Ease.prototype.iterativeSquareRoot=function(t){for(var r=.5,e=0;e<6;e++)r=(r+t/r)/2;return r},p5.Ease.prototype.fastSquareRoot=function(t){var r=.5*t,e=f2ib(t);return e=1597463007-(e>>1),t=ib2f(e),1/(t*=1.5-r*t*t)},p5.Ease.prototype.doubleExponentialOgee=function(t,r){r||(r=.25);var e=0+Number.EPSILON,a=1-Number.EPSILON;r=constrain(r,e,a);return t<=.5?Math.pow(2*t,1-r)/2:1-Math.pow(2*(1-t),1-r)/2},p5.Ease.prototype.circularFillet=function(t,r,e,a){r||(r=.25),e||(e=.75),a||(a=.75);var s=0,i=0,n=0,o=0,h=0,p=0,l=0,c=0,u=0,f=0+Number.EPSILON,y=1-Number.EPSILON,v=0+Number.EPSILON,b=1-Number.EPSILON;function m(t,r,e,a,s){var i=0,n=Math.sqrt(t*t+r*r);return 0!=n&&(i=(t*a+r*s+e)/n),i}var A,M,g=r=constrain(r,f,y),_=e=constrain(e,v,b),w=a,d=0*g-0*_,E=_-0,I=0-g,N=1*e-1*r,P=1-e,S=r-1;if(E*S!=P*I&&(0!=(A=m(E,I,d,(r+1)/2,(e+1)/2))&&0!=(M=m(P,S,N,(0+g)/2,(0+_)/2)))){var F,O,q,L=w;A<=0&&(L=-L),F=d-L*Math.sqrt(E*E+I*I),L=w,M<=0&&(L=-L);var k,z,x=((O=N-L*Math.sqrt(P*P+S*S))*I-F*S)/(q=E*S-P*I),T=(F*P-O*E)/q,j=0,G=0,B=0,R=0;0!=(k=E*E+I*I)&&(j=(-E*d-I*(z=E*T-I*x))/k,G=(E*z-I*d)/k),0!=(k=P*P+S*S)&&(B=(-P*N-S*(z=P*T-S*x))/k,R=(P*z-S*N)/k);var X=j-x,Q=G-T,W=B-x,C=R-T,Y=Math.atan2(Q,X),H=0,D=Math.sqrt((X*X+Q*Q)*(W*W+C*C));0!=D&&(H=Math.acos((X*W+Q*C)/D));var U=X*C-W*Q;U<0&&(Y-=H);var J=Y,K=Y+H;U<0&&(J=Y+H,K=Y),c=T,s=J,i=K,n=(l=x)+(u=w)*Math.cos(s),o=c+u*Math.sin(s),h=l+u*Math.cos(i),p=c+u*Math.sin(i)}var V=0;return(t=constrain(t,0,1))<=n?n<Math.EPSILON?_y=0:(V=t/n,_y=V*o):t>=h?(V=(t-h)/(1-h),_y=p+V*(1-p)):_y=t>=l?c-Math.sqrt(sq(u)-sq(t-l)):c+Math.sqrt(sq(u)-sq(t-l)),_y},p5.Ease.prototype.circularArcThroughAPoint=function(t,r,e){r||(r=.25),e||(e=.75);var a={centerX:0,centerY:0,dRadius:0},s=0+Number.EPSILON,i=1-Number.EPSILON,n=0+Number.EPSILON,o=1-Number.EPSILON;r=constrain(r,s,i),e=constrain(e,n,o),t=constrain(t,0+Number.EPSILON,1-Number.EPSILON);var h=r,p=e;function l(t,r,e,a,s,i){var n=a-r,o=e-t,h=i-a,p=s-e;return!(Math.abs(o)<=Number.EPSILON&&Math.abs(h)<=Number.EPSILON)&&(Math.abs(n)<=Number.EPSILON||(Math.abs(h)<=Number.EPSILON||(Math.abs(o)<=Number.EPSILON||Math.abs(p)<=Number.EPSILON)))}function c(t,r,e,a,s,i,n){var o=a-r,h=e-t,p=i-a,l=s-e;if(Math.abs(h)<=Number.EPSILON&&Math.abs(p)<=Number.EPSILON)return n.centerX=.5*(e+s),n.centerY=.5*(r+a),void(n.dRadius=Math.sqrt(sq(n.centerX-t)+sq(n.centerY-r)));var c=o/h,u=p/l;Math.abs(c-u)<=Number.EPSILON||(n.centerX=(c*u*(r-i)+u*(t+e)-c*(e+s))/(2*(u-c)),n.centerY=-1*(n.centerX-(t+e)/2)/c+(r+a)/2,n.dRadius=Math.sqrt(sq(n.centerX-t)+sq(n.centerY-r)))}if(l(0,0,h,p,1,1))if(l(0,0,1,1,h,p))if(l(h,p,0,0,1,1))if(l(h,p,1,1,0,0))if(l(1,1,h,p,0,0)){if(l(1,1,0,0,h,p))return 0;c(1,1,0,0,h,p,a)}else c(1,1,h,p,0,0,a);else c(h,p,1,1,0,0,a);else c(h,p,0,0,1,1,a);else c(0,0,1,1,h,p,a);else c(0,0,h,p,1,1,a);a.centerX>0&&a.centerX<1&&(r<a.centerX?(a.centerX=1,a.centerY=0,a.dRadius=1):(a.centerX=0,a.centerY=1,a.dRadius=1));return t>=a.centerX?a.centerY-Math.sqrt(sq(a.dRadius)-sq(t-a.centerX)):a.centerY+Math.sqrt(sq(a.dRadius)-sq(t-a.centerX))},p5.Ease.prototype.quadraticBezier=function(t,r,e){r||(r=.25),e||(e=.75);r=constrain(r,0,1),e=constrain(e,0,1),.5==r&&(r+=Number.EPSILON);var a=1-2*r,s=(Math.sqrt(r*r+a*t)-r)/a;return s*s*(1-2*e)+2*e*s},p5.Ease.prototype.cubicBezier=function(t,r,e,a,s){r||(r=.25),e||(e=.75),a||(a=.75),s||(s=.25);var i=0+Number.EPSILON,n=1-Number.EPSILON,o=0+Number.EPSILON,h=1-Number.EPSILON;r=constrain(r,i,n),e=constrain(e,0,1),a=constrain(a,o,h);s=constrain(s,0,1);for(var p=1-3*a+3*r-0,l=3*a-6*r+0,c=3*r-0,u=1-3*s+3*e-0,f=3*s-6*e+0,y=3*e-0,v=t,b=0;b<5;b++){v-=(p*(v*v*v)+l*(v*v)+c*v+0-t)*(1/(3*p*v*v+2*l*v+c)),v=constrain(v,0,1)}return u*(v*v*v)+f*(v*v)+y*v+0},p5.Ease.prototype.parabolaThroughAPoint=function(t,r,e){r||(r=.25),e||(e=.75);var a=0+Number.EPSILON,s=1-Number.EPSILON;r=constrain(r,a,s);var i=(1-(e=constrain(e,0,1)))/(1-r)-e/r,n=i*(t*t)-(i*(r*r)-e)/r*t;return n=constrain(n,0,1)},p5.Ease.prototype.dampedSinusoid=function(t,r){r||(r=.25);var e=100*r,a=t;return Math.pow(2.718281828459045,-6.90775527*a)*Math.cos(e*a+0)},p5.Ease.prototype.dampedSinusoidReverse=function(t,r){r||(r=.25);var e=100*r,a=1-t;return Math.pow(2.718281828459045,-6.90775527*a)*Math.cos(e*a+0)},p5.Ease.prototype.cubicBezierThrough2Points=function(t,r,e,a,s){r||(r=.25),e||(e=.75),a||(a=.75),s||(s=.25);var i,n,o,h,p=0,l=0+Number.EPSILON,c=1-Number.EPSILON,u=0+Number.EPSILON,f=1-Number.EPSILON,y=3*.3*.7*.7,v=3*.3*.3*.7,b=.63*(1-.7),m=(r=constrain(r,l,c))-0-.027,A=(e=constrain(e,u,f))-0-.027;return i=(m-(o=(m-(a-0-.7*.7*.7*1)*y/b)/-.8399999999999997)*v)/y,n=(A-(h=(A-(s-0-.7*.7*.7*1)*y/b)/-.8399999999999997)*v)/y,i=constrain(i,0+Number.EPSILON,1-Number.EPSILON),o=constrain(o,0+Number.EPSILON,1-Number.EPSILON),p=this.cubicBezier(t,i,n,o,h),p=constrain(p,0,1)},p5.Ease.prototype.doubleCircularOgee=function(t,r){r||(r=.25);return t<=(r=constrain(r,0,1))?Math.sqrt(sq(r)-sq(t-r)):1-Math.sqrt(sq(1-r)-sq(t-r))},p5.Ease.prototype.doubleSquircularOgee=function(t,r,e){r||(r=.25),e||(e=3);var a=2*e;return t<=(r=constrain(r,0,1))?Math.pow(Math.pow(r,a)-Math.pow(t-r,a),1/a):1-Math.pow(Math.pow(1-r,a)-Math.pow(t-r,a),1/a)},p5.Ease.prototype.generalSigmoidLogitCombo=function(t,r,e){r||(r=.25),e||(e=.75);var a=0;if(r<.5){a=e-.5+this.normalizedLogit(t,1-2*r)}else{var s=e-.5;a=this.normalizedLogitSigmoid(t+s,2*(r-.5))}return a=constrain(a,0,1)},p5.Ease.prototype.normalizedLogitSigmoid=function(t,r){r||(r=.25);var e=0+Number.EPSILON,a=1-Number.EPSILON;r=1/(1-(r=constrain(r,e,a)))-1,r*=5;var s=1/(1+Math.exp(0-(t-.5)*r)),i=1/(1+Math.exp(.5*r)),n=1/(1+Math.exp(-.5*r));return s=map(s,i,n,0,1)},p5.Ease.prototype.normalizedLogit=function(t,r){r||(r=.25);var e=0+Number.EPSILON,a=1-Number.EPSILON;r=1/(1-(r=constrain(r,e,a)))-1,r*=5;var s=1/(1+Math.exp(.5*r)),i=1/(1+Math.exp(-.5*r));t=map(t,0,1,s,i);var n=Math.log(t/(1-t));return n*=1/r,n+=.5,n=constrain(n,0,1)},p5.Ease.prototype.generalizedQuartic=function(t,r,e){r||(r=.25),e||(e=.75);var a=t*t*(1-2*(r=1-(r=constrain(r,0,1))))+2*r*t;return a*a*(1-2*(e=constrain(e,0,1)))+2*e*a},p5.Ease.prototype.boxcar=function(t){return t>=.5},p5.Ease.prototype.listAlgos=function(){var t=new Array;for(var r in this.__proto__){var e=!0;"listAlgos"==r?e=!1:"fillArray"==r?e=!1:"fillFloat32Array"==r?e=!1:"fillFloat64Array"==r&&(e=!1),e&&t.push(r)}return t},p5.Ease.prototype.fillArray=function(t,r,e){for(var a=new Array(r),s=0;s<r;s++){var i=s/(r-1);a[s]=this[t](i,e)}return a},p5.Ease.prototype.fillFloat32Array=function(t,r,e){for(var a=new Float32Array(r),s=0;s<r;s++){var i=s/(r-1);a[s]=this[t](i,e)}return a},p5.Ease.prototype.fillFloat64Array=function(t,r,e){for(var a=new Float64Array(r),s=0;s<r;s++){var i=s/(r-1);a[s]=this[t](i,e)}return a},p5.ArrayEval=function(){this.version=.01},p5.ArrayEval.prototype.eval=function(_evalstr,_l1){this.l1=_l1;var multi=0,e,_dest;if(Array.isArray(_evalstr)&&(multi=1),_dest=multi?createArray(_l1,_evalstr.length):createArray(_l1),multi)for(e in _evalstr)_evalstr[e]=_evalstr[e].replace(/cu/g,"i"),_evalstr[e]=_evalstr[e].replace(/du/g,"l1"),_evalstr[e]=_evalstr[e].replace(/su/g,"(i/(l1-1)*2.-1.)"),_evalstr[e]=_evalstr[e].replace(/u/g,"(i/(l1-1))");else _evalstr=_evalstr.replace(/cu/g,"i"),_evalstr=_evalstr.replace(/du/g,"l1"),_evalstr=_evalstr.replace(/su/g,"(i/(l1-1)*2.-1.)"),_evalstr=_evalstr.replace(/u/g,"(i/(l1-1))");for(var i=0;i<this.l1;i++)if(multi)for(e=0;e<_evalstr.length;e++)_dest[i][e]=eval("with(this) { "+_evalstr[e]+" }");else _dest[i]=eval("with(this) { "+_evalstr+" }");return _dest},p5.ArrayEval.prototype.eval1d=function(t,r){return this.eval(t,r)},p5.ArrayEval.prototype.eval2d=function(_evalstr,_l1,_l2){this.l1=_l1,this.l2=_l2;var multi=0,e,_dest;if(Array.isArray(_evalstr)&&(multi=1),_dest=multi?createArray(_l1,_l2,_evalstr.length):createArray(_l1,_l2),multi)for(e in _evalstr)_evalstr[e]=_evalstr[e].replace(/cu/g,"i"),_evalstr[e]=_evalstr[e].replace(/du/g,"l1"),_evalstr[e]=_evalstr[e].replace(/su/g,"(i/(l1-1)*2.-1.)"),_evalstr[e]=_evalstr[e].replace(/u/g,"(i/(l1-1))"),_evalstr[e]=_evalstr[e].replace(/cv/g,"j"),_evalstr[e]=_evalstr[e].replace(/dv/g,"l2"),_evalstr[e]=_evalstr[e].replace(/sv/g,"(j/(l2-1)*2.-1.)"),_evalstr[e]=_evalstr[e].replace(/v/g,"(j/(l2-1))");else _evalstr=_evalstr.replace(/cu/g,"i"),_evalstr=_evalstr.replace(/du/g,"l1"),_evalstr=_evalstr.replace(/su/g,"(i/(l1-1)*2.-1.)"),_evalstr=_evalstr.replace(/u/g,"(i/(l1-1))"),_evalstr=_evalstr.replace(/cv/g,"j"),_evalstr=_evalstr.replace(/dv/g,"l2"),_evalstr=_evalstr.replace(/sv/g,"(j/(l2-1)*2.-1.)"),_evalstr=_evalstr.replace(/v/g,"(j/(l2-1))");for(var i=0;i<this.l1;i++)for(var j=0;j<this.l2;j++)if(multi)for(e=0;e<_evalstr.length;e++)_dest[i][j][e]=eval("with(this) { "+_evalstr[e]+" }");else _dest[i][j]=eval("with(this) { "+_evalstr+" }");return _dest},p5.ArrayEval.prototype.eval3d=function(_evalstr,_l1,_l2,_l3){this.l1=_l1,this.l2=_l2,this.l3=_l3;var multi=0,e,_dest;if(Array.isArray(_evalstr)&&(multi=1),_dest=multi?createArray(_l1,_l2,_l3,_evalstr.length):createArray(_l1,_l2,_l3),multi)for(e in _evalstr)_evalstr[e]=_evalstr[e].replace(/cu/g,"i"),_evalstr[e]=_evalstr[e].replace(/du/g,"l1"),_evalstr[e]=_evalstr[e].replace(/su/g,"(i/(l1-1)*2.-1.)"),_evalstr[e]=_evalstr[e].replace(/u/g,"(i/(l1-1))"),_evalstr[e]=_evalstr[e].replace(/cv/g,"j"),_evalstr[e]=_evalstr[e].replace(/dv/g,"l2"),_evalstr[e]=_evalstr[e].replace(/sv/g,"(j/(l2-1)*2.-1.)"),_evalstr[e]=_evalstr[e].replace(/v/g,"(j/(l2-1))"),_evalstr[e]=_evalstr[e].replace(/cw/g,"k"),_evalstr[e]=_evalstr[e].replace(/dw/g,"l3"),_evalstr[e]=_evalstr[e].replace(/sw/g,"(k/(l3-1)*2.-1.)"),_evalstr[e]=_evalstr[e].replace(/w/g,"(k/(l3-1))");else _evalstr=_evalstr.replace(/cu/g,"i"),_evalstr=_evalstr.replace(/du/g,"l1"),_evalstr=_evalstr.replace(/su/g,"(i/(l1-1)*2.-1.)"),_evalstr=_evalstr.replace(/u/g,"(i/(l1-1))"),_evalstr=_evalstr.replace(/cv/g,"j"),_evalstr=_evalstr.replace(/dv/g,"l2"),_evalstr=_evalstr.replace(/sv/g,"(j/(l2-1)*2.-1.)"),_evalstr=_evalstr.replace(/v/g,"(j/(l2-1))"),_evalstr=_evalstr.replace(/cw/g,"k"),_evalstr=_evalstr.replace(/dw/g,"l3"),_evalstr=_evalstr.replace(/sw/g,"(k/(l3-1)*2.-1.)"),_evalstr=_evalstr.replace(/w/g,"(k/(l3-1))");for(var i=0;i<this.l1;i++)for(var j=0;j<this.l2;j++)for(var k=0;k<this.l3;k++)if(multi)for(e=0;e<_evalstr.length;e++)_dest[i][j][k][e]=eval("with(this) { "+_evalstr[e]+" }");else _dest[i][j][k]=eval("with(this) { "+_evalstr+" }");return _dest},p5.Filt=function(t){t||(t=60),this.version=.01;this.a0=1,this.b0=1,this.a1=0,this.b1=0,this.a2=0,this.b2=0,this.xn=0,this.yn=0,this.xpn=0,this.ypn=0,this.xppn=0,this.yppn=0,this.fs=t,this.type="LPF",this.f0=this.fs/4,this.dB=0,this.Q=1,this.A,this.w0,this.cw0,this.sw0,this.alpha,this.soff,this.precalc()},p5.Filt.prototype.set=function(t,r,e,a){t&&(this.type=t),r&&(this.f0=r),e&&(this.Q=e),a&&(this.dB=a),this.precalc()},p5.Filt.prototype.setFs=function(t){t&&(this.fs=t),this.precalc()},p5.Filt.prototype.setType=function(t){t&&(this.type=t),this.precalc()},p5.Filt.prototype.setFreq=function(t){t&&(this.f0=t),this.precalc()},p5.Filt.prototype.setQ=function(t){t&&(this.Q=t),this.precalc()},p5.Filt.prototype.setGain=function(t){t&&(this.dB=t),this.precalc()},p5.Filt.prototype.setBW=function(t){t&&(this.Q=this.f0/t),this.precalc()},p5.Filt.prototype.process=function(t){var r;for(var e in Array.isArray(t)&&(r=new Array(t.length)),t.constructor==Float32Array&&(r=new Float32Array(t.length)),t.constructor==Float64Array&&(r=new Float64Array(t.length)),t)r[e]=this.tick(t[e]);return r},p5.Filt.prototype.tick=function(t){return this.xn=t,this.yn=this.b0/this.a0*this.xn+this.b1/this.a0*this.xpn+this.b2/this.a0*this.xppn-this.a1/this.a0*this.ypn-this.a2/this.a0*this.yppn,this.xppn=this.xpn,this.xpn=this.xn,this.yppn=this.ypn,this.ypn=this.yn,this.yn},p5.Filt.prototype.clear=function(){this.xn=0,this.yn=0,this.xpn=0,this.ypn=0,this.xppn=0,this.yppn=0},p5.Filt.prototype.coeffs=function(t,r,e,a,s,i){6!=arguments.length?(console.log("p5.Filt needs six coefficients for raw biquad:"),console.log("     a0 -> denominator gain for filter (y[n] term)."),console.log("     b0 -> gain for current input (x[n] term)."),console.log("     b1 -> gain for previous input (x[n-1] term)."),console.log("     b2 -> gain for previous previous input (x[n-2] term)."),console.log("     a1 -> gain for previous output (y[n-1] term)."),console.log("     a2 -> gain for previous previous output (y[n-2] term)."),console.log("when working with 5-coefficient biquad formulae set a0 to 1.0."),console.log("n.b. some systems will refer to y terms as 'b' and x terms as 'a'.")):(this.a0=t,this.b0=r,this.b1=e,this.b2=a,this.a1=s,this.a2=i)},p5.Filt.prototype.precalc=function(){switch(this.A=Math.sqrt(Math.pow(10,this.dB/20)),this.w0=2*PI*this.f0/this.fs,this.cw0=Math.cos(this.w0),this.sw0=Math.sin(this.w0),this.alpha=Math.sin(this.w0)/(2*this.Q),this.soff=2*Math.sqrt(this.A)*this.alpha,this.type){case"LPF":case"lowpass":this.b0=(1-this.cw0)/2,this.b1=1-this.cw0,this.b2=(1-this.cw0)/2,this.a0=1+this.alpha,this.a1=-2*this.cw0,this.a2=1-this.alpha;break;case"HPF":case"highpass":this.b0=(1+this.cw0)/2,this.b1=-(1+this.cw0),this.b2=(1+this.cw0)/2,this.a0=1+this.alpha,this.a1=-2*this.cw0,this.a2=1-this.alpha;break;case"BPF":case"bandpass":this.b0=this.sw0/2,this.b1=0,this.b2=-this.sw0/2,this.a0=1+this.alpha,this.a1=-2*this.cw0,this.a2=1-this.alpha;break;case"BPF0":case"resonant":this.b0=this.alpha,this.b1=0,this.b2=-this.alpha,this.a0=1+this.alpha,this.a1=-2*this.cw0,this.a2=1-this.alpha;break;case"notch":case"bandreject":case"bandstop":this.b0=1,this.b1=-2*this.cw0,this.b2=1,this.a0=1+this.alpha,this.a1=-2*this.cw0,this.a2=1-this.alpha;break;case"APF":case"allpass":this.b0=1-this.alpha,this.b1=-2*this.cw0,this.b2=1+this.alpha,this.a0=1+this.alpha,this.a1=-2*this.cw0,this.a2=1-this.alpha;break;case"peakingEQ":case"peaknotch":this.b0=1+this.alpha*this.A,this.b1=-2*this.cw0,this.b2=1-this.alpha*this.A,this.a0=1+this.alpha/this.A,this.a1=-2*this.cw0,this.a2=1-this.alpha/this.A;break;case"lowShelf":case"lowshelf":this.b0=this.A*(this.A+1-(this.A-1)*this.cw0+this.soff),this.b1=2*this.A*(this.A-1-(this.A+1)*this.cw0),this.b2=this.A*(this.A+1-(this.A-1)*this.cw0-this.soff),this.a0=this.A+1+(this.A-1)*this.cw0+this.soff,this.a1=-2*(this.A-1+(this.A+1)*this.cw0),this.a2=this.A+1+(this.A-1)*this.cw0-this.soff;break;case"highShelf":case"highshelf":this.b0=this.A*(this.A+1+(this.A-1)*this.cw0+this.soff),this.b1=-2*this.A*(this.A-1+(this.A+1)*this.cw0),this.b2=this.A*(this.A+1+(this.A-1)*this.cw0-this.soff),this.a0=this.A+1-(this.A-1)*this.cw0+this.soff,this.a1=2*(this.A-1-(this.A+1)*this.cw0),this.a2=this.A+1-(this.A-1)*this.cw0-this.soff;break;default:this.b0=1,this.b1=0,this.b2=0,this.a0=1,this.a1=0,this.a2=0}},p5.FastFourierTransform=function(t,r,e){this.bufferSize=t||512,this.hopSize=e||this.bufferSize,this.sampleRate=r||60,this.bandwidth=this.sampleRate/this.bufferSize,this.real=new Float64Array(this.bufferSize),this.imag=new Float64Array(this.bufferSize),this.doSpectrum=!0,this.magnitude=new Float64Array(this.bufferSize/2),this.phase=new Float64Array(this.bufferSize/2),this.doFrequency=!1,this.runningphase=new Float64Array(this.bufferSize/2),this.previousphase=new Float64Array(this.bufferSize/2),this.frequency=new Float64Array(this.bufferSize/2),this.peakBand=0,this.peak=0,this.reverseTable=new Uint32Array(this.bufferSize);for(var a,s=1,i=this.bufferSize>>1;s<this.bufferSize;){for(a=0;a<s;a++)this.reverseTable[a+s]=this.reverseTable[a]+i;s<<=1,i>>=1}for(this.sinTable=new Float64Array(this.bufferSize),this.cosTable=new Float64Array(this.bufferSize),a=0;a<this.bufferSize;a++)this.sinTable[a]=Math.sin(-PI/a),this.cosTable[a]=Math.cos(-PI/a)},p5.FastFourierTransform.prototype.getBandFrequency=function(t){return this.bandwidth*t},p5.FastFourierTransform.prototype.calculateSpectrum=function(){var t,r,e,a,s=2/this.bufferSize;this.peakBand=0,this.peak=0;for(var i=0,n=this.bufferSize/2;i<n;i++)t=this.real[i],r=this.imag[i],e=s*Math.sqrt(t*t+r*r),a=Math.atan2(r,t),e>this.peak&&(this.peakBand=i,this.peak=e),this.magnitude[i]=e,this.phase[i]=a;this.doFrequency&&this.calculateFrequency()},p5.FastFourierTransform.prototype.calculateFrequency=function(){var t=Array.from(this.phase);for(i in this.runningphase=subtractArray(t,this.previousphase),this.runningphase=addArray(this.runningphase,TWO_PI+PI),this.runningphase=moduloArray(this.runningphase,TWO_PI),this.runningphase=subtractArray(this.runningphase,PI),this.previousphase=t,this.frequency)this.frequency[i]=this.bandwidth*i+this.runningphase[i]*this.sampleRate/(TWO_PI*this.hopSize)},p5.FastFourierTransform.prototype.forward=function(t){var r=Math.floor(Math.log(this.bufferSize)/Math.LN2);if(Math.pow(2,r)!==this.bufferSize)throw"buffer size must be a power of 2.";if(this.bufferSize!==t.length)throw"buffer is not the same size as defined FFT. FFT: "+bufferSize+" buffer: "+buffer.length;var e,a,s,i,n,o,h,p,l,c=1;for(p=0;p<this.bufferSize;p++)this.real[p]=t[this.reverseTable[p]],this.imag[p]=0;for(;c<this.bufferSize;){e=this.cosTable[c],a=this.sinTable[c],s=1,i=0;for(var u=0;u<c;u++){for(p=u;p<this.bufferSize;)l=p+c,n=s*this.real[l]-i*this.imag[l],o=s*this.imag[l]+i*this.real[l],this.real[l]=this.real[p]-n,this.imag[l]=this.imag[p]-o,this.real[p]+=n,this.imag[p]+=o,p+=c<<1;s=(h=s)*e-i*a,i=h*a+i*e}c<<=1}this.doSpectrum&&this.calculateSpectrum()},p5.FastFourierTransform.prototype.inverse=function(t,r){t=t||this.real,r=r||this.imag;var e,a,s,i,n,o,h,p,l,c=1;for(l=0;l<this.bufferSize;l++)r[l]*=-1;var u=new Float64Array(this.bufferSize),f=new Float64Array(this.bufferSize);for(l=0;l<t.length;l++)u[l]=t[this.reverseTable[l]],f[l]=r[this.reverseTable[l]];for(t=u,r=f;c<this.bufferSize;){e=this.cosTable[c],a=this.sinTable[c],s=1,i=0;for(var y=0;y<c;y++){for(l=y;l<this.bufferSize;)o=s*t[n=l+c]-i*r[n],h=s*r[n]+i*t[n],t[n]=t[l]-o,r[n]=r[l]-h,t[l]+=o,r[l]+=h,l+=c<<1;s=(p=s)*e-i*a,i=p*a+i*e}c<<=1}var v=new Float64Array(this.bufferSize);for(l=0;l<this.bufferSize;l++)v[l]=t[l]/this.bufferSize;return v},p5.prototype.imap=function(t,r,e,a,s){return constrain(Math.floor(map(t,r,e,a,s)),Math.min(a,s),Math.max(a,s)-1)},p5.prototype.wrap=function(t,r,e){var a;_a=Math.min(r,e),_b=Math.max(r,e);var s=_b-_a;if(t<_b&&t>=_a)return t;if(_a==_b)return _a;if(t<_a)for(a=t;a<_a;)a+=s;else a=(t-_a)%s+_a;return a},p5.prototype.fold=function(t,r,e){var a;_a=Math.min(r,e),_b=Math.max(r,e);var s=_b-_a;if(t<_b&&t>=_a)return t;if(_a==_b)return _a;if(t<_a){var i=_a-t;(n=Math.floor(i/s))%2==0?a=(i-=n*s)+_a:(i-=n*s,a=_b-i)}else{var n;i=t-_b;(n=Math.floor(i/s))%2==0?(i-=n*s,a=_b-i):a=(i-=n*s)+_a}return a},p5.prototype.createArray=function(t){var r=new Array(t||0).fill(0),e=t;if(arguments.length>1)for(var a=Array.prototype.slice.call(arguments,1);e--;)r[t-1-e]=this.createArray.apply(this,a);return r},p5.prototype.normalizeArray=function(t){var r=Math.max(Math.max(t),Math.abs(Math.min(t)));return t.map(function(t){return t/r})},p5.prototype.resizeArray=function(t,r){for(var e=[],a=0;a<r;a++){var s=map(a,0,r-1,0,t.length-1),i=Math.floor(s),n=Math.ceil(s),o=s%1;e[a]=lerp(t[i],t[n],o)}return e},p5.prototype.multiplyArray=function(t,r){Array.isArray(r)||(r=[r]);var e=[];t.length!=r.length&&(r=resizeArray(r,t.length));for(var a=0;a<t.length;a++)e[a]=t[a]*r[a];return e},p5.prototype.addArray=function(t,r){Array.isArray(r)||(r=[r]);var e=[];t.length!=r.length&&(r=resizeArray(r,t.length));for(var a=0;a<t.length;a++)e[a]=t[a]+r[a];return e},p5.prototype.subtractArray=function(t,r){Array.isArray(r)||(r=[r]);var e=[];t.length!=r.length&&(r=resizeArray(r,t.length));for(var a=0;a<t.length;a++)e[a]=t[a]-r[a];return e},p5.prototype.divideArray=function(t,r){Array.isArray(r)||(r=[r]);var e=[];t.length!=r.length&&(r=resizeArray(r,t.length));for(var a=0;a<t.length;a++)e[a]=t[a]/r[a];return e},p5.prototype.moduloArray=function(t,r){Array.isArray(r)||(r=[r]);var e=[];t.length!=r.length&&(r=resizeArray(r,t.length));for(var a=0;a<t.length;a++)e[a]=t[a]%r[a];return e},p5.prototype.sumArray=function(t){return t.reduce(function(t,r){return t+r})},p5.prototype.f2ib=function(t){var r=new Int8Array(4),e=new Int32Array(r.buffer,0,1);return new Float32Array(r.buffer,0,1)[0]=t,e[0]},p5.prototype.ib2f=function(t){var r=new Int8Array(4),e=new Int32Array(r.buffer,0,1),a=new Float32Array(r.buffer,0,1);return e[0]=t,a[0]},p5.prototype.sinc=function(t){return Math.sin(PI*t)/(PI*t)},p5.prototype.besselI0=function(t){var r;return 0==t?1:-((r=t*t)*(r*(r*(r*(r*(r*(r*(r*(r*(r*(r*(r*(r*(2.10580722890567e-23*r+3.80715242345326e-20)+4.794402575483e-17)+4.35125971262668e-14)+3.0093112711296e-11)+1.60224679395361e-8)+654858370096785e-20)+.00202591084143397)+.463076284721)+75.4337328948189)+8307.92541809429)+571661.130563785)+21641557.2361227)+356644482.244025)+1440482982.27235)/(r*(r*(r-3076.46912682801)+3476263.32405882)-1440482982.27235)},p5.prototype.fplot=function(t,r){var e;Array.isArray(t)||(e=[t]),Array.isArray(t)&&(e=t),t.constructor==Float32Array&&(e=Array.prototype.slice.call(t)),t.constructor==Float64Array&&(e=Array.prototype.slice.call(t));var a,s,i,n,o=[],h="";for(t.length,o=resizeArray(e,80),o=normalizeArray(o),a=1/11,s=1,i=0;i<23;i++){for(0,h=i%2?"~":"|",n=0;n<79;n++)isNaN(o[n])&&(o[n]=0),o[n]>=s&&o[n]<s+a?(h+=o[n+1]>s+a?"/":"-",o[n+1]<s&&(h+="\\"),n):o[n]<s&&o[n+1]>s+a||o[n]>s+a&&o[n+1]<s?(h+="|",n):h+=" ";if(0>=s&&0<s+a){for(h="~",n=0;n<80;n++)h+="-";78}console.log("%c"+h,r),s-=a}return 0}});